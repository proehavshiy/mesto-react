(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{30:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),o=n(20),c=n.n(o),s=n(8),r=(n(30),n(24)),u=n(2),l=n(3),p=n(4),_=n(21),d=n(22),m=new(function(){function e(t){var n=t.serverUrl,a=t.cohort,i=t.token;Object(_.a)(this,e),this._serverUrl=n,this._cohort=a,this._token=i}return Object(d.a)(e,[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))}},{key:"getUserInfo",value:function(){return fetch("".concat(this._serverUrl,"/").concat(this._cohort,"/users/me"),{headers:{authorization:this._token}}).then(this._checkResponse)}},{key:"getCards",value:function(){return fetch("".concat(this._serverUrl,"/").concat(this._cohort,"/cards"),{headers:{authorization:this._token}}).then(this._checkResponse)}},{key:"sendUserInfo",value:function(e){var t=e.name,n=e.about;return fetch("".concat(this._serverUrl,"/").concat(this._cohort,"/users/me"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:t,about:n})}).then(this._checkResponse)}},{key:"sendNewCard",value:function(e){var t=e.name,n=e.link;return fetch("".concat(this._serverUrl,"/").concat(this._cohort,"/cards"),{method:"POST",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:t,link:n})}).then(this._checkResponse)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._serverUrl,"/").concat(this._cohort,"/cards/").concat(e),{method:"DELETE",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({_id:e})}).then(this._checkResponse)}},{key:"sendUserAvatar",value:function(e){var t=e.avatar;return fetch("".concat(this._serverUrl,"/").concat(this._cohort,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({avatar:t})}).then(this._checkResponse)}},{key:"changeLikeCardStatus",value:function(e,t){return fetch("".concat(this._serverUrl,"/").concat(this._cohort,"/cards/likes/").concat(e),{method:t?"PUT":"DELETE",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({cardID:e,like:t})}).then(this._checkResponse)}}]),e}())({serverUrl:"https://mesto.nomoreparties.co/v1",cohort:"cohort-24",token:"edb7481a-fcf7-4397-94a7-daeb2327e95b"}),j="https://auth.nomoreparties.co",h=function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))},b=i.a.createContext(),f=n(0);var g=function(e){var t=e.onSignOut,n=e.email,a=Object(p.g)();return Object(f.jsx)("nav",{className:"header__navBar",children:"/sign-in"===a.pathname&&Object(f.jsx)(s.c,{className:"header__link page__button",to:"/sign-up",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})||"/sign-up"===a.pathname&&Object(f.jsx)(s.c,{className:"header__link page__button",to:"/sign-in",children:"\u0412\u043e\u0439\u0442\u0438"})||"/"===a.pathname&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("p",{className:"header__email",children:n}),Object(f.jsx)("button",{className:"header__link header__button page__button",onClick:t,children:"\u0412\u044b\u0439\u0442\u0438"})]})})},v=n.p+"static/media/Mesto-logo.5f3664ca.svg";var O=function(e){var t=e.onSignOut,n=e.email;return Object(f.jsxs)("header",{className:"header page__section page__animation page__animation page__header",children:[Object(f.jsx)("img",{className:"logo",src:v,alt:"\u043b\u043e\u0433\u043e\u0442\u0438\u043f \u041c\u0435\u0441\u0442\u043e"}),Object(f.jsx)(g,{onSignOut:t,email:n})]})};var x=function(e){var t=e.card,n=e.onCardClick,a=e.onCardLike,o=e.onCardDelete,c=i.a.useContext(b),s=t.owner._id===c._id,r=t.likes.some((function(e){return e._id===c._id}));return Object(f.jsxs)("figure",{className:"element",children:[Object(f.jsx)("img",{className:"element__image",src:t.link,alt:t.name,onClick:function(){n(t)}}),s&&Object(f.jsx)("button",{className:"element__button-delete page__button",type:"button","aria-label":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443",onClick:function(){o(t)}}),Object(f.jsxs)("figcaption",{className:"element__figcaption",children:[Object(f.jsx)("h2",{className:"element__card-title",children:t.name}),Object(f.jsxs)("div",{className:"element__like-section",children:[Object(f.jsx)("button",{className:"element__button-like page__button ".concat(r?"button-like_active":""),type:"button",onClick:function(){a(t)}}),Object(f.jsx)("p",{className:"element__like-counter",children:t.likes.length})]})]})]},t._id)};var N=function(e){var t=e.cards,n=e.onEditProfile,a=e.onAddPlace,o=e.onEditAvatar,c=e.onCardClick,s=e.onCardLike,r=e.onCardDelete,u=i.a.useContext(b),l=u.name,p=u.about,_=u.avatar;return Object(f.jsxs)("main",{className:"content page__block-alignment",children:[Object(f.jsxs)("section",{className:"profile page__section page__animation page__profile",children:[Object(f.jsx)("div",{className:"profile__avatar avatar-form-open-button",style:{backgroundImage:"url(".concat(_,")")},onClick:o}),Object(f.jsxs)("div",{className:"profile__info",children:[Object(f.jsx)("h1",{className:"profile__title",children:l}),Object(f.jsx)("button",{className:"profile__change-button page__button profile-form-open-button",onClick:n,type:"button","aria-label":"\u041a\u043d\u043e\u043f\u043a\u0430 \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(f.jsx)("p",{className:"profile__subtitle",children:p})]}),Object(f.jsx)("button",{className:"profile__add-button page__button add-card-form-open-button",onClick:a,type:"button","aria-label":"\u041a\u043d\u043e\u043f\u043a\u0430 \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443"})]}),Object(f.jsx)("section",{className:"elements page__section page__animation",children:t.map((function(e){return Object(f.jsx)(x,{card:e,onCardClick:c,onCardLike:s,onCardDelete:r},e._id)}))})]})};var k=function(){return Object(f.jsx)("footer",{className:"footer page__section page__animation",children:Object(f.jsxs)("p",{className:"footer__copyright",children:["\xa9 ",(new Date).getFullYear()," Mesto Russia"]})})};var C=function(e){var t=e.card,n=e.onClose,a=t?"popup__flexed popup_opened":"popup__flexed";return i.a.useEffect((function(){if(t){var e=function(e){"Escape"===e.key&&n()};return document.addEventListener("keyup",e),function(){document.removeEventListener("keyup",e)}}}),[t,n]),Object(f.jsx)("div",{className:"popup popup_open-image ".concat(a),onClick:function(e){e.target===e.currentTarget&&n()},children:Object(f.jsxs)("div",{className:"popup__container popup__container_open-image",children:[t?Object(f.jsx)("button",{className:"popup__button-close popup__button-close_open-image page__button",onClick:function(e){e.target===e.currentTarget&&n()},type:"button","aria-label":"\u0437\u0430\u043a\u0440\u044b\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"}):"",Object(f.jsxs)("figure",{className:"popup__figure",children:[Object(f.jsx)("img",{className:"popup__image",src:t?t.link:"",alt:t?"\u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0430: ".concat(t.name):""}),Object(f.jsx)("figcaption",{className:"popup__figcaption",children:t?t.name:""})]})]})})},y=n(10);var S=function(e){var t=e.name,n=e.isOpen,a=e.onClose,o=e.children,c=n?"popup__flexed popup_opened":"popup__flexed";return i.a.useEffect((function(){if(n){var e=function(e){"Escape"===e.key&&a()};return document.addEventListener("keyup",e),function(){document.removeEventListener("keyup",e)}}}),[n,a]),Object(f.jsx)("div",{className:"popup popup_".concat(t," ").concat(c),onClick:function(e){e.target===e.currentTarget&&a()},children:Object(f.jsxs)("div",{className:"popup__container popup__container_form popup__container_".concat(t),children:[Object(f.jsx)("button",{className:"popup__button-close popup__button-close_".concat(t," page__button"),onClick:function(e){e.target===e.currentTarget&&a()},"aria-label":"\u041a\u043d\u043e\u043f\u043a\u0430 \u0417\u0430\u043a\u0440\u044b\u0442\u044c \u0444\u043e\u0440\u043c\u0443",type:"button"}),o]})})};var M=function(e){var t=e.name,n=e.title,a=e.submitText,i=e.isOpen,o=e.onClose,c=e.onSubmit,s=e.submitButtonState,r=e.children;return Object(f.jsx)(S,{name:t,isOpen:i,onClose:o,children:Object(f.jsxs)("form",{className:"popup__form",onSubmit:c,name:"".concat(t,"-form"),noValidate:!0,autoComplete:"off",children:[Object(f.jsx)("h2",{className:"popup__heading",children:n}),r,Object(f.jsx)("button",{className:"popup__button-save popup__button-save_".concat(t," page__button ").concat(!s&&"popup__button-save_disabled"),disabled:!s,type:"submit",value:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440","aria-label":"\u041a\u043d\u043e\u043f\u043a\u0430 \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0444\u043e\u0440\u043c\u0443",children:a})]})})};var w=function(e){var t=e.isOpen,n=e.onClose,a=e.onUpdateUser,o=e.isSubmitting,c=i.a.useContext(b),s=i.a.useState({}),r=Object(l.a)(s,2),p=r[0],_=r[1],d=!!(p.name&&p.signing&&p.name.valid&&p.signing.valid),m=o?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c":"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...",j=!p.name||p.name.errorMessage?"authentification__input_error":"",h=!p.name||p.name.errorMessage?"authentification__input-error_active":"",g=p.name&&p.name.errorMessage,v=!p.signing||p.signing.errorMessage?"authentification__input_error":"",O=!p.signing||p.signing.errorMessage?"authentification__input-error_active":"",x=p.signing&&p.signing.errorMessage;function N(e){var t=e.target,n=t.name,a=t.value,i=t.validity.valid,o=t.validationMessage;_((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(y.a)({},n,{value:a,valid:i,errorMessage:o}))}))}return i.a.useEffect((function(){_((function(e){return Object(u.a)(Object(u.a)({},e),{},{name:{value:c.name,valid:!0,errorMessage:""},signing:{value:c.about,valid:!0,errorMessage:""}})}))}),[c]),Object(f.jsx)(M,{name:"change-profile",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",submitText:m,isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),a({name:p.name.value,about:p.signing.value})},submitButtonState:d,children:Object(f.jsxs)("fieldset",{className:"popup__profile-information",children:[Object(f.jsxs)("section",{className:"popup__input-section",children:[Object(f.jsx)("input",{className:"popup__input popup__input_profile-name ".concat(j),value:p.name?p.name.value:"",onChange:N,type:"text",name:"name",placeholder:"\u0418\u043c\u044f",required:!0,minLength:2,maxLength:40}),Object(f.jsx)("span",{className:"popup__input-error popup__input-error_type_profile-name ".concat(h),children:g})]}),Object(f.jsxs)("section",{className:"popup__input-section",children:[Object(f.jsx)("input",{className:"popup__input popup__input_profile-signing ".concat(v),value:p.signing?p.signing.value:"",onChange:N,type:"text",name:"signing",placeholder:"\u041f\u043e\u0434\u043f\u0438\u0441\u044c",required:!0,minLength:2,maxLength:200}),Object(f.jsx)("span",{className:"popup__input-error popup__input-error_type_profile-signing ".concat(O),children:x})]})]})})};var T=function(e){var t=e.isOpen,n=e.onClose,a=e.onUpdateAvatar,o=e.isSubmitting,c=i.a.useState({}),s=Object(l.a)(c,2),r=s[0],u=s[1],p=!!(r.value&&r.value&&r.valid&&r.valid),_=o?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c":"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...",d=r.errorMessage?"popup__input_error":"",m=r.errorMessage?"popup__input-error_active":"";return i.a.useEffect((function(){!0===o&&u({value:"",valid:!0,errorMessage:""})}),[o]),Object(f.jsx)(M,{name:"avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",submitText:_,isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),a({avatar:r.value})},submitButtonState:p,children:Object(f.jsx)("fieldset",{className:"popup__profile-information",children:Object(f.jsxs)("section",{className:"popup__input-section",children:[Object(f.jsx)("input",{className:"popup__input popup__input_image-link ".concat(d),value:r.value||"",onChange:function(e){var t=e.target,n=t.value,a=t.validity.valid,i=t.validationMessage;u({value:n,valid:a,errorMessage:i})},type:"url",name:"image-link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0}),Object(f.jsx)("span",{className:"popup__input-error popup__input-error_type_image-link ".concat(m),children:r.errorMessage})]})})})};var L=function(e){var t=e.isOpen,n=e.onClose,a=e.onAddPlace,o=e.isSubmitting,c=i.a.useState({}),s=Object(l.a)(c,2),r=s[0],p=s[1],_=!!(r.location&&r.link&&r.location.valid&&r.link.valid),d=o?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c":"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435...",m=!r.location||r.location.errorMessage?"authentification__input_error":"",j=!r.location||r.location.errorMessage?"authentification__input-error_active":"",h=r.location&&r.location.errorMessage,b=!r.link||r.link.errorMessage?"authentification__input_error":"",g=!r.link||r.link.errorMessage?"authentification__input-error_active":"",v=r.link&&r.link.errorMessage;function O(e){var t=e.target,n=t.name,a=t.value,i=t.validity.valid,o=t.validationMessage;p((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(y.a)({},n,{value:a,valid:i,errorMessage:o}))}))}return i.a.useEffect((function(){!0===o&&p({})}),[o]),Object(f.jsx)(M,{name:"add-card",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",submitText:d,isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),a({name:r.location.value,link:r.link.value})},submitButtonState:_,children:Object(f.jsxs)("fieldset",{className:"popup__profile-information",children:[Object(f.jsxs)("section",{className:"popup__input-section",children:[Object(f.jsx)("input",{className:"popup__input popup__input_location-name ".concat(m),value:r.location?r.location.value:"",onChange:O,type:"text",name:"location",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",required:!0,minLength:2,maxLength:30}),Object(f.jsx)("span",{className:"popup__input-error popup__input-error_type_location-name ".concat(j),children:h})]}),Object(f.jsxs)("section",{className:"popup__input-section",children:[Object(f.jsx)("input",{className:"popup__input popup__input_image-link ".concat(b),value:r.link?r.link.value:"",onChange:O,type:"url",name:"link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0}),Object(f.jsx)("span",{className:"popup__input-error popup__input-error_type_image-link ".concat(g),children:v})]})]})})};var E=function(e){var t=e.onClose,n=e.handleCardDelete,a=e.cardForDeletion,i=e.isSubmitting?"\u0414\u0430":"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435...";return Object(f.jsx)(M,{name:"confirm-deletion",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",submitText:i,isOpen:a,onClose:t,onSubmit:function(e){e.preventDefault(),n(a)},submitButtonState:a})};var U=function(e){var t=e.name,n=e.title,a=e.submitText,i=e.onSubmit,o=e.submitButtonState,c=e.isRegister,r=e.children;return Object(f.jsx)("div",{className:"authentification page__block-alignment page__animation",children:Object(f.jsx)("div",{className:"authentification__container authentification__container_".concat(t),children:Object(f.jsxs)("form",{className:"authentification__form",onSubmit:i,name:"".concat(t,"-form"),noValidate:!0,autoComplete:"off",children:[Object(f.jsx)("h2",{className:"authentification__heading",children:n}),r,Object(f.jsx)("button",{className:"authentification__button-save authentification__button-save_".concat(t," page__button ").concat(!o&&"authentification__button-save_disabled"),disabled:!o,type:"submit",value:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440","aria-label":"\u041a\u043d\u043e\u043f\u043a\u0430 \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0444\u043e\u0440\u043c\u0443",children:a}),c&&Object(f.jsxs)("p",{className:"authentification__redirection",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",Object(f.jsx)(s.b,{to:"/sign-in",className:"authentification__link page__button",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})})};var D=function(e){var t=e.onLogin,n=e.isSubmitting,a=i.a.useState({}),o=Object(l.a)(a,2),c=o[0],s=o[1],r=!!(c.email&&c.password&&c.email.valid&&c.password.valid),p=n?"\u0412\u043e\u0439\u0442\u0438":"\u0412\u0445\u043e\u0434...",_=!c.email||c.email.errorMessage?"authentification__input_error":"",d=!c.email||c.email.errorMessage?"authentification__input-error_active":"",m=c.email&&c.email.errorMessage,j=!c.password||c.password.errorMessage?"authentification__input_error":"",h=!c.password||c.password.errorMessage?"authentification__input-error_active":"",b=c.password&&c.password.errorMessage;function g(e){var t=e.target,n=t.name,a=t.value,i=t.validity.valid,o=t.validationMessage;s((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(y.a)({},n,{value:a,valid:i,errorMessage:o}))}))}return Object(f.jsx)(U,{name:"login",title:"\u0412\u0445\u043e\u0434",submitText:p,onSubmit:function(e){e.preventDefault(),t(c.email.value,c.password.value)},submitButtonState:r,isRegister:!1,children:Object(f.jsxs)("fieldset",{className:"authentification__profile-information",children:[Object(f.jsxs)("section",{className:"authentification__input-section",children:[Object(f.jsx)("input",{className:"authentification__input authentification__input_email ".concat(_),value:c.email?c.email.value:"",onChange:g,type:"email",name:"email",placeholder:"Email",required:!0,minLength:6,maxLength:30}),Object(f.jsx)("span",{className:"authentification__input-error authentification__input-error_type_email ".concat(d),children:m})]}),Object(f.jsxs)("section",{className:"authentification__input-section",children:[Object(f.jsx)("input",{className:"authentification__input authentification__input_password ".concat(j),value:c.password?c.password.value:"",onChange:g,type:"password",name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",required:!0,minLength:6}),Object(f.jsx)("span",{className:"authentification__input-error authentification__input-error_type_password ".concat(h),children:b})]})]})})};var P=function(e){var t=e.onRegister,n=e.isSubmitting,a=i.a.useState({}),o=Object(l.a)(a,2),c=o[0],s=o[1],r=!!(c.email&&c.password&&c.email.valid&&c.password.valid),p=n?"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f":"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f...",_=!c.email||c.email.errorMessage?"authentification__input_error":"",d=!c.email||c.email.errorMessage?"authentification__input-error_active":"",m=c.email&&c.email.errorMessage,j=!c.password||c.password.errorMessage?"authentification__input_error":"",h=!c.password||c.password.errorMessage?"authentification__input-error_active":"",b=c.password&&c.password.errorMessage;function g(e){var t=e.target,n=t.name,a=t.value,i=t.validity.valid,o=t.validationMessage;s((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(y.a)({},n,{value:a,valid:i,errorMessage:o}))}))}return Object(f.jsx)(U,{name:"register",title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",submitText:p,onSubmit:function(e){e.preventDefault(),t(c.email.value,c.password.value)},submitButtonState:r,isRegister:!0,children:Object(f.jsxs)("fieldset",{className:"authentification__profile-information",children:[Object(f.jsxs)("section",{className:"authentification__input-section",children:[Object(f.jsx)("input",{className:"authentification__input authentification__input_email ".concat(_),value:c.email?c.email.value:"",onChange:g,type:"email",name:"email",placeholder:"Email",required:!0,minLength:6,maxLength:30}),Object(f.jsx)("span",{className:"authentification__input-error authentification__input-error_type_email ".concat(d),children:m})]}),Object(f.jsxs)("section",{className:"authentification__input-section",children:[Object(f.jsx)("input",{className:"authentification__input authentification__input_password ".concat(j),value:c.password?c.password.value:"",onChange:g,type:"password",name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",required:!0,minLength:6}),Object(f.jsx)("span",{className:"authentification__input-error authentification__input-error_type_password ".concat(h),children:b})]})]})})};var A=function(e){var t=e.isOpen,n=e.onClose,a=e.popupStatusMessage,i=Object(p.f)(),o="\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!"===a,c=o?"popup__image-status_type_success":"popup__image-status_type_reject";return Object(f.jsx)(S,{name:"status",isOpen:t,onClose:function(){n(),o&&i.push("/sign-in")},children:Object(f.jsxs)("div",{className:"popup__status",children:[Object(f.jsx)("div",{className:"popup__image-status ".concat(c)}),Object(f.jsx)("h2",{className:"popup__heading",children:a})]})})},I=n(25),R=function(e){var t=e.component,n=Object(I.a)(e,["component"]);return Object(f.jsx)(p.b,{children:function(){return n.loggedIn?Object(f.jsx)(t,Object(u.a)({},n)):Object(f.jsx)(p.a,{to:"./sign-in"})}})};var B=function(){return Object(f.jsxs)("div",{className:"spinner page__section",children:[Object(f.jsx)("div",{className:"spinner__part spinner__part_one"}),Object(f.jsx)("div",{className:"spinner__part spinner__part_two"}),Object(f.jsx)("div",{className:"spinner__part spinner__part_three"}),Object(f.jsx)("div",{className:"spinner__part spinner__part_four"}),Object(f.jsx)("div",{className:"spinner__part spinner__part_five"}),Object(f.jsx)("div",{className:"spinner__part spinner__part_six"}),Object(f.jsx)("div",{className:"spinner__part spinner__part_seven"}),Object(f.jsx)("div",{className:"spinner__part spinner__part_eight"})]})};var F=function(){var e=i.a.useState(!1),t=Object(l.a)(e,2),n=t[0],a=t[1],o=i.a.useState(!1),c=Object(l.a)(o,2),s=c[0],_=c[1],d=i.a.useState(!1),g=Object(l.a)(d,2),v=g[0],x=g[1],y=i.a.useState(""),S=Object(l.a)(y,2),M=S[0],U=S[1],I=i.a.useState(null),F=Object(l.a)(I,2),q=F[0],J=F[1],z=i.a.useState(""),H=Object(l.a)(z,2),V=H[0],G=H[1],Y=i.a.useState(!1),K=Object(l.a)(Y,2),Q=K[0],W=K[1],X=i.a.useState(""),Z=Object(l.a)(X,2),$=Z[0],ee=Z[1],te=Object(p.f)(),ne=i.a.useState(null),ae=Object(l.a)(ne,2),ie=ae[0],oe=ae[1],ce=i.a.useState(!1),se=Object(l.a)(ce,2),re=se[0],ue=se[1],le=i.a.useState([]),pe=Object(l.a)(le,2),_e=pe[0],de=pe[1],me=i.a.useState({profile:!0,avatar:!0,place:!0,login:!0,register:!0,deletion:!0}),je=Object(l.a)(me,2),he=je[0],be=je[1];function fe(){x(!1),a(!1),_(!1),J(null),G(""),U("")}function ge(){if(localStorage.getItem("jwt")){var e=localStorage.getItem("jwt");e&&(t=e,fetch("".concat(j,"/users/me"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then(h)).then((function(e){e&&(ee(e.data.email),W(!0),te.push("/"))})).catch((function(e){console.log(e)}))}var t}return i.a.useEffect((function(){Q&&Promise.all([m.getUserInfo(),m.getCards()]).then((function(e){var t=Object(l.a)(e,2),n=t[0],a=t[1];oe(n),de(a),ue(!0)})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445:",e)}))}),[Q]),console.log(he),i.a.useEffect((function(){ge(),console.log("\u0437\u0430\u043b\u043e\u0433\u043e\u043d\u0435\u043d \u043f\u043e \u0442\u043e\u043a\u0435\u043d\u0443")}),[]),Object(f.jsx)(b.Provider,{value:ie,children:Object(f.jsxs)("div",{className:"page",children:[Object(f.jsx)(O,{onSignOut:function(){localStorage.removeItem("jwt"),W(!1),te.push("/sign-in")},email:$}),Q?re?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(R,{path:"/",loggedIn:Q,cards:_e,onEditProfile:function(){x(!0)},onAddPlace:function(){_(!0)},onEditAvatar:function(){a(!0)},onCardClick:function(e){J(e)},onCardLike:function(e){var t=e.likes.some((function(e){return e._id===ie._id}));m.changeLikeCardStatus(e._id,!t).then((function(t){de((function(n){return n.map((function(n){return n._id===e._id?t:n}))}))})).catch((function(e){console.log("\u043e\u0448\u0438\u0431\u043a\u0430 \u043b\u0430\u0439\u043a\u0430",e)}))},onCardDelete:U,component:N}),Object(f.jsx)(w,{isOpen:v,onClose:fe,onUpdateUser:function(e){be((function(e){return Object(u.a)(Object(u.a)({},e),{},{profile:!1})})),m.sendUserInfo(e).then((function(e){oe(e),fe()})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445:",e)})).finally((function(){be((function(e){return Object(u.a)(Object(u.a)({},e),{},{profile:!0})}))}))},isSubmitting:he.profile}),Object(f.jsx)(T,{isOpen:n,onClose:fe,onUpdateAvatar:function(e){be((function(e){return Object(u.a)(Object(u.a)({},e),{},{avatar:!1})})),m.sendUserAvatar(e).then((function(e){oe(e),fe()})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445:",e)})).finally((function(){be((function(e){return Object(u.a)(Object(u.a)({},e),{},{avatar:!0})}))}))},isSubmitting:he.avatar}),Object(f.jsx)(L,{isOpen:s,onClose:fe,onAddPlace:function(e){be((function(e){return Object(u.a)(Object(u.a)({},e),{},{place:!1})})),m.sendNewCard(e).then((function(e){de([e].concat(Object(r.a)(_e))),fe()})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445:",e)})).finally((function(){be((function(e){return Object(u.a)(Object(u.a)({},e),{},{place:!0})}))}))},isSubmitting:he.place}),Object(f.jsx)(C,{card:q,onClose:fe}),Object(f.jsx)(E,{onClose:fe,handleCardDelete:function(e){be((function(e){return Object(u.a)(Object(u.a)({},e),{},{deletion:!1})})),m.deleteCard(e._id).then((function(){de(_e.filter((function(t){return t._id!==e._id}))),fe()})).catch((function(e){console.log("\u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445",e)})).finally((function(){be((function(e){return Object(u.a)(Object(u.a)({},e),{},{deletion:!0})}))}))},cardForDeletion:M,isSubmitting:he.deletion})]}):Object(f.jsx)(B,{}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(p.b,{path:"/sign-up",children:Object(f.jsx)(P,{onRegister:function(e,t){be((function(e){return Object(u.a)(Object(u.a)({},e),{},{register:!1})})),function(e,t){return fetch("".concat(j,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({password:t,email:e})}).then(h)}(e,t).then((function(e){G("\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!")})).catch((function(e){console.log(e),G("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437.")})).finally((function(){be((function(e){return Object(u.a)(Object(u.a)({},e),{},{register:!0})}))}))},isSubmitting:he.register})}),Object(f.jsx)(p.b,{path:"/sign-in",children:Object(f.jsx)(D,{onLogin:function(e,t){be((function(e){return Object(u.a)(Object(u.a)({},e),{},{login:!1})})),console.log("login",he),e&&t&&function(e,t){return fetch("".concat(j,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({password:t,email:e})}).then(h)}(e,t).then((function(t){t.token&&(W(!0),localStorage.setItem("jwt",t.token),ee(e),te.push("/"))})).catch((function(e){console.log(e),G("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437.")})).finally((function(){be((function(e){return Object(u.a)(Object(u.a)({},e),{},{login:!0})}))}))},isSubmitting:he.login})}),Object(f.jsx)(A,{isOpen:V,onClose:fe,popupStatusMessage:V})]}),Object(f.jsx)(k,{})]})})},q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,38)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),a(e),i(e),o(e),c(e)}))};c.a.render(Object(f.jsx)(i.a.StrictMode,{children:Object(f.jsx)(s.a,{children:Object(f.jsx)(F,{})})}),document.getElementById("root")),q()}},[[37,1,2]]]);
//# sourceMappingURL=main.c7ec5ff3.chunk.js.map